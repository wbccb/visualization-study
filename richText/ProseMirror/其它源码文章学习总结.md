# ProseMirror

## Schema的定义

基础的有`topNode`和`text`两种底层的数据，其中每一个类型中有两个最重要的属性：
- `group`: 代表目前节点的数据类型，比如`group: block`代表节点就是`block`类型
- `content`: 代表目前节点的children的数据类型，比如`content: block+`代表节点包含了多个`block`数据类型，可以使用`group`的数据来组装自身的children数据

> topNode表明哪一种类型是最顶层的数据类型，也就是根节点！

```ts
const schema = new Schema({
  nodes: {
    //...
    document: {
      group: "block",
      content: "block+",
    },
  },
  marks: {
    //...
  },
  topNode: "document",
});
```

比如下面的schema中，我们设置了
- `topNode: "doc"`代表根节点是`doc`
- `doc`的`content`是`tile+`，代表它的children就是`type=block_tile`的数据集合
- `block_tile`的`group`是`tile`，代表一种自定义类型，这种自定义类型可以在其它数据的content中使用，也可以用于各种样式的设置，它自身的`content`是`block+`

```ts
export const schema = new Schema({
  nodes: {
    doc: {
      content: "tile+",
    },
    block_tile: {
      content: "block+",
      group: "tile",
      inline: false,
      toDOM: () => {
        return ["div", { class: "block_tile" }, 0];
      },
    },
    text: {
      group: "inline",
    },
  },
  topNode: "doc",
});
```



# 参考
- [富文本编辑器-不止于入门](https://juejin.cn/column/7284417436752527421)
- [富文本编辑器 从 Prosemirror 再到 Tiptap](https://juejin.cn/post/7284545971609305145)